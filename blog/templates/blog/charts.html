{% extends "blog/base.html" %}
{% load static %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
{% block content %}


<!--<div class='row'>
    <div class='col-sm-12' url-endpoint='{% url 'api-data' %}'>
-->
        <canvas id="myChart" width="400" height="400"></canvas>
<script>

var endpoint = '/api/chart/data'
var defaultData = []
var labels1 = [];
var bgcolor = [];

$.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){
        labels1 = data.labels
        defaultData = data.default
        bgcolor = data.bgcolor
        setChart()
    },
    error: function(error_data){
        console.log("error")
        console.log(error_data)
    }
})

function setChart(){
    var ctx = document.getElementById('myChart');
    var myChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: labels1,
            datasets: [{
                label: '# of Posts',
                data: defaultData,
                backgroundColor: bgcolor,
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)',
                    'rgba(249,168,37 ,1)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    })
}


/*var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: labels1,
        datasets: [{
            label: '# of Votes',
            data: defaultData,
            backgroundColor: [
                'rgba(255, 99, 132, 0.6)',
                'rgba(54, 162, 235, 0.6)',
                'rgba(255, 206, 86, 0.6)',
                'rgba(75, 192, 192, 0.6)',
                'rgba(153, 102, 255, 0.6)',
                'rgba(255, 159, 64, 0.6)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});*/
</script>

    </div>
</div>


  <!--<div id="container1"></div>
                <script src="https://code.highcharts.com/highcharts.src.js"></script>
                <script>
                    Highcharts.chart('container1', {
                        chart: {
                            type: 'column'
                        },
                        title: {
                            text: 'Historic World Population by Region'
                        },
                        xAxis: {
                            categories: ['Africa', 'America', 'Asia', 'Europe', 'Oceania']
                        },
                        series: [{
                            name: 'Year 1800',
                            data: [107, 31, 635, 203, 2]
                        }, {
                            name: 'Year 1900',
                            data: [133, 156, 947, 408, 6]
                        }, {
                            name: 'Year 2012',
                            data: [1052, 954, 4250, 740, 38]
                        }]
                    });
                </script>-->
                        
<!--{% endblock content %}